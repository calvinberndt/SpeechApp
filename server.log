INFO:backend.chatterbox_tts_processor:Applied torch.load patch for mps compatibility
INFO:     Will watch for changes in these directories: ['/Users/calvinberndt/_GitHub/SpeechApp']
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [5707] using WatchFiles
INFO:watchfiles.main:6 changes detected
INFO:watchfiles.main:8 changes detected
INFO:watchfiles.main:2 changes detected
INFO:backend.chatterbox_tts_processor:Applied torch.load patch for mps compatibility
INFO:     Started server process [5794]
INFO:     Waiting for application startup.
INFO:backend.speech_processor:Initializing Kyutai STT model...
INFO:backend.speech_processor:Kyutai STT model initialized successfully
INFO:backend.llm_client:Checking Ollama server at http://localhost:11434...
INFO:backend.llm_client:Found model: openhermes-custom:latest
INFO:backend.llm_client:LLM client initialized with model: openhermes
INFO:backend.chatterbox_tts_processor:Initializing Chatterbox TTS model on mps...
/Users/calvinberndt/_GitHub/SpeechApp/.venv/lib/python3.11/site-packages/diffusers/models/lora.py:393: FutureWarning: `LoRACompatibleLinear` is deprecated and will be removed in version 1.0.0. Use of `LoRACompatibleLinear` is deprecated. Please switch to PEFT backend by installing PEFT: `pip install peft`.
  deprecate("LoRACompatibleLinear", "1.0.0", deprecation_message)
INFO:root:input frame rate=25
INFO:backend.chatterbox_tts_processor:Applying performance optimizations for mps...
INFO:backend.chatterbox_tts_processor:Enabled half precision for T3 model
INFO:backend.chatterbox_tts_processor:Enabled half precision for S3Gen model
INFO:backend.chatterbox_tts_processor:Applied torch.compile to T3 model
INFO:backend.chatterbox_tts_processor:Applied torch.compile to S3Gen model
INFO:backend.chatterbox_tts_processor:Applied aggressive speed optimization to T3 inference
INFO:backend.chatterbox_tts_processor:âœ… Chatterbox TTS model initialized successfully on mps
INFO:     Application startup complete.
loaded PerthNet (Implicit) at step 250,000
INFO:     127.0.0.1:54146 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:54149 - "GET / HTTP/1.1" 200 OK
INFO:     127.0.0.1:54151 - "GET /static/app.js HTTP/1.1" 200 OK
INFO:     127.0.0.1:54149 - "GET /static/style.css HTTP/1.1" 200 OK
INFO:     ('127.0.0.1', 54158) - "WebSocket /ws/user-9658" [accepted]
INFO:main:Client user-9658 connected
INFO:     127.0.0.1:54151 - "GET /favicon.ico HTTP/1.1" 404 Not Found
INFO:     connection open
INFO:backend.llm_client:Generated response: Hello! I'm great, thank you for asking. How about ...
INFO:backend.chatterbox_tts_processor:Generating TTS for: Hello! I'm great, thank you for asking. How about you?...
(mpsFileLoc): /AppleInternal/Library/BuildRoots/1c8f7852-1ca9-11f0-b28b-226177e5bb69/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mpsgraph/MetalPerformanceShadersGraph/Core/Files/MPSGraphUtilities.mm:233:0: error: 'mps.add' op requires the same element type for all operands and results
(mpsFileLoc): /AppleInternal/Library/BuildRoots/1c8f7852-1ca9-11f0-b28b-226177e5bb69/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mpsgraph/MetalPerformanceShadersGraph/Core/Files/MPSGraphUtilities.mm:233:0: note: see current operation: %7 = "mps.add"(%5, %arg2) : (tensor<1x1024xf32>, tensor<1024xf16>) -> tensor<*xf32>
(mpsFileLoc): /AppleInternal/Library/BuildRoots/1c8f7852-1ca9-11f0-b28b-226177e5bb69/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mpsgraph/MetalPerformanceShadersGraph/Core/Files/MPSGraphUtilities.mm:233:0: error: 'mps.add' op requires the same element type for all operands and results
(mpsFileLoc): /AppleInternal/Library/BuildRoots/1c8f7852-1ca9-11f0-b28b-226177e5bb69/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mpsgraph/MetalPerformanceShadersGraph/Core/Files/MPSGraphUtilities.mm:233:0: note: see current operation: %7 = "mps.add"(%5, %arg2) : (tensor<1x1024xf32>, tensor<1024xf16>) -> tensor<*xf32>
/AppleInternal/Library/BuildRoots/1c8f7852-1ca9-11f0-b28b-226177e5bb69/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mpsgraph/MetalPerformanceShadersGraph/Core/Files/MPSGraphExecutable.mm:1232: failed assertion `original module failed verification'
INFO:watchfiles.main:1 change detected
INFO:watchfiles.main:5 changes detected
